# STM32 Motor Control Project

## 项目简介

这是一个基于STM32F103C8微控制器的项目，实现了OLED显示屏控制和PA0引脚周期性输出功能。

## 功能特性

### ✅ 主要功能
- **PA0引脚控制**: 8秒周期输出（5秒高电平3.3V，3秒低电平0V）
- **OLED显示**: 128x64 SSD1306 OLED屏幕显示状态信息
- **实时监控**: 引脚状态、运行时间、切换倒计时等信息
- **状态指示**: 板载LED显示系统运行状态

### 🔧 硬件配置
- **开发板**: STM32F103C8 (Blue Pill)
- **OLED引脚**: PA4(SDA), PA5(SCL)
- **输出引脚**: PA0 (3.3V输出)
- **状态LED**: PC13 (板载LED)

## 项目结构

```
Motor/
├── src/                    # 源文件目录
│   ├── main.cpp           # 主程序
│   ├── simple_oled.cpp    # OLED驱动实现
│   └── simple_oled.h      # OLED驱动头文件
├── include/               # 头文件目录
│   ├── OLED_Font.h        # OLED字库文件
│   ├── delay.h            # 延时函数
│   └── 其他系统文件...
├── lib/                   # 库文件目录
├── platformio.ini        # PlatformIO配置文件
└── README.md             # 项目说明文档
```

## 开发环境

- **IDE**: PlatformIO
- **框架**: Arduino
- **平台**: STM32
- **开发板**: genericSTM32F103C8

## 编译和上传

```bash
# 编译项目
pio run

# 上传到开发板
pio run --target upload

# 串口监控（如果需要）
pio device monitor
```

## 硬件连接

### OLED显示屏连接
```
STM32F103C8    →    OLED SSD1306
PA4            →    SDA
PA5            →    SCL
3.3V           →    VCC
GND            →    GND
```

### PA0输出连接
```
STM32F103C8    →    负载/测量设备
PA0            →    输出信号
```

## 功能说明

### PA0引脚输出周期
- **高电平状态**: 5秒 (3.3V输出)
- **低电平状态**: 3秒 (0V输出)  
- **完整周期**: 8秒循环

### OLED显示内容
- PA0引脚状态 (HIGH/LOW)
- 运行时间统计
- 状态切换倒计时
- 系统计数器
- 连接状态检查

## 技术特点

### 🚀 优化亮点
- **软件I2C**: 实现可靠的OLED通信
- **时序控制**: 精确的引脚输出时序
- **状态管理**: 完整的运行状态监控
- **调试友好**: 无串口监视器时的OLED调试信息

### 🛠️ 已解决的问题
- I2C通信时序优化
- OLED初始化序列修正
- 页面管理错误修复
- 显示配置参数调整

## 项目历史

这个项目经历了完整的开发过程：
1. 初始OLED显示问题诊断
2. 驱动代码系统性修复
3. 无串口监视器环境适配
4. 最终功能验证完成

## 使用说明

1. **硬件准备**: 连接OLED显示屏到指定引脚
2. **代码编译**: 使用PlatformIO编译项目
3. **程序上传**: 将固件上传到STM32开发板
4. **功能验证**: 观察OLED显示和PA0输出

## 注意事项

- 确保OLED显示屏为SSD1306控制器
- PA4/PA5引脚已被OLED占用，避免冲突
- PA0引脚输出严格按照8秒周期运行
- 系统启动时板载LED会闪烁3次表示就绪

## 开发者信息

- **开发者**: wzgcavtc01
- **项目类型**: STM32嵌入式开发
- **开发框架**: Arduino + PlatformIO
- **完成状态**: ✅ 功能完整验证

---

**项目状态**: 开发完成，功能正常，可直接使用。